
{{ define "main" }}
 	<article class="post">
		<header class="entry-header">
 			<div class="entry-meta">
         <span class="posted-on">
            <time class="entry-date published" datetime="{{ .Date.Format .Site.Params.DateForm }}">
               {{if isset .Params "date"}}{{- .Date.Format "January 2, 2006" -}}{{end}}
            </time>
         </span>
 			</div>
 			<h1 class="entry-title"><a href="{{ .Permalink }}" rel="bookmark">{{ .Title }}</a></h1>
		</header>
		<div class="entry-content">
			{{ .Content }}
		</div>
		
    <center>
      <input type="text" style="border-radius: .5em;" class="fuzzy-search" placeholder="Search directory..."/>
      <buttonr style="font-size: 12px; padding: 8px;" class="sort" data-sort="name">Sort by name</buttonr>
      <!-- <buttonr id="shuffle" style="font-size: 12px;" type="button">Randomly shuffle</buttonr> -->
    </center>
    
    <div class="flex-container" id="directory-content">
        <ul class="list" id="directory-grid">
          {{ .Scratch.Set "directory" $.Site.Data.directory_mock  }}
          {{ if eq .Hugo.Environment "production" }}
            {{ .Scratch.Set "directory" $.Site.Data.directory }}
          {{ end }}

            {{ $directory :=  ( .Scratch.Get "directory" ) }}
            {{ range $directory }}
              {{ partial "directory/li.html" . }}
            {{ end }}
        </ul>
      </div>  <!-- flex -->
      <center>
        <div class="pagination-nav">
          <ul class="paginate_back"><i class="fas fa-chevron-left"></i></ul>
          <ul class="pagination"></ul>
          <ul class="paginate_next"><i class="fas fa-chevron-right"></i></ul>
        </div>
      </center>
      
	</article><!-- #post-## -->
		
	<script>
    var directoryList = new List('directory-content', {
      valueNames: ['name', 'honorific', 'affiliation', 'interests', 'shiny_apps', 'r_groups', 'r_packages'],
      page: 10,
      pagination: {
        innerWindow: 2,
        left: 1,
        right: 1,
        paginationClass: "pagination",
      }
    });
    
    $('.paginate_next').on('click', function(){
	    var list = $('.pagination').find('li');
	    $.each(list, function(position, element){
	        if($(element).is('.active')){
	            $(list[position+1]).trigger('click');
	        }
	    })
	});

	$('.paginate_back').on('click', function(){
	    var list = $('.pagination').find('li');
	    $.each(list, function(position, element){
	        if($(element).is('.active')){
	            $(list[position-1]).trigger('click');
	        }
	    })
	  }); 

	</script>
{{ end }}
